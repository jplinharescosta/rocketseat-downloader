# Downloader de Cursos da Rocketseat

## Script original em: https://gist.github.com/felipeadeildo/961587b1f5660a5db42102666e9884d0

## Script de atualizaÃ§Ã£o em: https://github.com/Kazbonfim/rocketseat-downloader2

CrÃ©ditos para @felipeadeildo e @Kazbonfim

Este Ã© um script em Python projetado para automatizar o download de cursos, mÃ³dulos e materiais da plataforma Rocketseat. Ele utiliza a sessÃ£o do usuÃ¡rio para acessar o conteÃºdo e o `yt-dlp` para baixar as videoaulas de forma eficiente.

## âš ï¸ Aviso Legal

Este script foi criado para **fins educacionais** e para facilitar o acesso offline a conteÃºdos que vocÃª **jÃ¡ possui legalmente**. O download e a distribuiÃ§Ã£o de conteÃºdo protegido por direitos autorais sem permissÃ£o sÃ£o ilegais. Use esta ferramenta por sua conta e risco, respeitando sempre os **Termos de ServiÃ§o** da Rocketseat.

NÃ£o endorsamos o compartilhamento indevido de conteÃºdos!

---

## âœ¨ Funcionalidades

- **AutenticaÃ§Ã£o Segura**: Realiza login na sua conta e salva a sessÃ£o localmente para nÃ£o precisar inserir suas credenciais a cada uso. Suporte a credenciais via variÃ¡veis de ambiente e senha mascarada no prompt.
- **VerificaÃ§Ã£o de DependÃªncias**: Checa automaticamente se **FFmpeg** e **yt-dlp** estÃ£o instalados e acessÃ­veis no `PATH` do sistema.
- **SeleÃ§Ã£o Interativa**: Permite escolher interativamente qual formaÃ§Ã£o e quais mÃ³dulos especÃ­ficos vocÃª deseja baixar.
- **OrganizaÃ§Ã£o AutomÃ¡tica**: Cria uma estrutura de pastas organizada para os cursos baixados: `Cursos/Nome da FormaÃ§Ã£o/Nome do Curso/Nome do MÃ³dulo/`.
- **Download Completo**: Baixa os vÃ­deos via `yt-dlp` (com headers obrigatÃ³rios) e tambÃ©m materiais de apoio. Gera um `.txt` com metadados (descriÃ§Ã£o, autor, duraÃ§Ã£o) por aula.
- **ResiliÃªncia de Rede**: RequisiÃ§Ãµes HTTP com retries e timeout configurÃ¡vel, reduzindo falhas transitÃ³rias.
- **CompatÃ­vel com mÃºltiplas estruturas da API**: Funciona tanto com nÃ³s do tipo `cluster` (com `groups`) quanto do tipo `group` (liÃ§Ãµes diretamente em `group.lessons`).
- **RelatÃ³rio Detalhado**: Ao final, gera um relatÃ³rio (`.txt`) na pasta `relatorios`, informando Ãªxitos, falhas e duraÃ§Ã£o total.
- **Logs para Debug**: Salva a resposta de `/journey-nodes/{slug}` em `logs/{slug}_cluster_details.json` para inspeÃ§Ã£o quando necessÃ¡rio.

---

## ğŸš€ PrÃ©-requisitos

Antes de executar o script, garanta que vocÃª tem o seguinte instalado e configurado em seu sistema:

1.  **Python 3.x**: [Instale a partir do site oficial](https://www.python.org/downloads/).
2.  **FFmpeg**: Essencial para que o `yt-dlp` possa juntar os segmentos de Ã¡udio e vÃ­deo.
    - **Download**: [ffmpeg.org/download.html](https://ffmpeg.org/download.html)
    - **InstruÃ§Ã£o**: ApÃ³s o download, **adicione o caminho da pasta `bin` do FFmpeg Ã s suas variÃ¡veis de ambiente (PATH)**.
3.  **yt-dlp**: A ferramenta principal para o download dos vÃ­deos.

    - **Download**: [github.com/yt-dlp/yt-dlp](https://github.com/yt-dlp/yt-dlp)
    - **InstruÃ§Ã£o**: ApÃ³s o download, **adicione o caminho do executÃ¡vel do yt-dlp Ã s suas variÃ¡veis de ambiente (PATH)**.

4.  (Opcional) Defina variÃ¡veis de ambiente para facilitar o uso sem prompt (ver abaixo).

---

## ğŸ› ï¸ InstalaÃ§Ã£o

Com os prÃ©-requisitos atendidos, siga os passos abaixo.

1.  **Clone o repositÃ³rio ou baixe o script**:
    Se estiver usando Git, clone o repositÃ³rio. Caso contrÃ¡rio, apenas salve o arquivo `.py` em uma pasta de sua escolha.

2.  **Acesse a pasta do projeto**:
    Abra um terminal (CMD, PowerShell ou outro) e navegue atÃ© a pasta onde vocÃª salvou o script.

    ```bash
    cd caminho/para/a/pasta
    ```

3.  **Instale as dependÃªncias Python**:
    Execute o comando a seguir para instalar as bibliotecas necessÃ¡rias. Ã‰ recomendado criar um ambiente virtual (`venv`) antes.

    ```bash
    pip install requests beautifulsoup4 m3u8
    ```

    _ObservaÃ§Ã£o: O `m3u8` estÃ¡ listado, mas o cÃ³digo atual nÃ£o o utiliza ativamente._

4.  (Opcional) Configure variÃ¡veis de ambiente:

    - `ROCKETSEAT_EMAIL` e `ROCKETSEAT_PASSWORD`: para login sem prompt.
    - `HTTP_TIMEOUT`: timeout padrÃ£o das requisiÃ§Ãµes (segundos, ex.: `30`).
    - `CDN_DOMAIN`: domÃ­nio da CDN do vÃ­deo (fallback padrÃ£o jÃ¡ configurado).
    - `SESSION_DIR`: pasta onde o arquivo `.session.pkl` serÃ¡ salvo (por padrÃ£o, a raiz do projeto).

---

## â–¶ï¸ Como Usar

1.  **Execute o script** a partir do seu terminal:

    ```bash
    python main.py
    ```

2.  **Login (Primeiro Uso)**:

    - O script verificarÃ¡ se existe um arquivo de sessÃ£o (`.session.pkl`).
    - Se nÃ£o houver, ele solicitarÃ¡ seu **e-mail** e a **senha mascarada**. Alternativamente, use `ROCKETSEAT_EMAIL` e `ROCKETSEAT_PASSWORD` para login automÃ¡tico. ApÃ³s o login, a sessÃ£o serÃ¡ salva para usos futuros.

3.  **SeleÃ§Ã£o da FormaÃ§Ã£o**:

    - Uma lista das suas formaÃ§Ãµes disponÃ­veis serÃ¡ exibida.
    - Digite o nÃºmero correspondente Ã  formaÃ§Ã£o que deseja baixar e pressione `Enter`.

4.  **SeleÃ§Ã£o dos MÃ³dulos**:

    - Em seguida, o script listarÃ¡ todos os mÃ³dulos da formaÃ§Ã£o escolhida.
    - VocÃª pode:
      - Digitar `0` para baixar **todos os mÃ³dulos**.
      - Digitar os nÃºmeros dos mÃ³dulos desejados, separados por vÃ­rgula (ex: `1, 3, 5`), para baixar apenas os selecionados.

5.  **Aguarde o Download**:
    - O script iniciarÃ¡ o processo, exibindo o progresso no console. Os arquivos serÃ£o salvos na pasta `Cursos`.
    - Ao final, um relatÃ³rio detalhado serÃ¡ impresso no console e salvo em um arquivo na pasta `relatorios`.

---

## ğŸ“‚ Estrutura de Arquivos Gerada

O script criarÃ¡ a seguinte estrutura de pastas e arquivos:

```
.
â”œâ”€â”€ Cursos/
â”‚   â””â”€â”€ Nome da FormaÃ§Ã£o/
â”‚       â””â”€â”€ Nome do Curso/
â”‚           â””â”€â”€ 01. Nome do MÃ³dulo/
â”‚               â”œâ”€â”€ 01. Nome do Grupo/
â”‚               â”‚   â”œâ”€â”€ 01. TÃ­tulo da Aula.mp4
â”‚               â”‚   â”œâ”€â”€ 01. TÃ­tulo da Aula.txt
â”‚               â”‚   â””â”€â”€ 01. TÃ­tulo da Aula_arquivos/
â”‚               â”‚       â””â”€â”€ material_de_apoio.pdf
â”‚               â””â”€â”€ 02. Outro Grupo/
â”‚                   â””â”€â”€ ...
â”œâ”€â”€ relatorios/
â”‚   â””â”€â”€ relatorio_20240913_223000.txt
â”œâ”€â”€ .session.pkl
â””â”€â”€ nome_do_script.py
```

## Jamais compartilhe seu arquivo de sessÃ£o, .pkl

---

## âš™ï¸ VariÃ¡veis de Ambiente (Resumo)

- `ROCKETSEAT_EMAIL` / `ROCKETSEAT_PASSWORD`: credenciais para login automÃ¡tico.
- `HTTP_TIMEOUT`: timeout (em segundos) para todas as requisiÃ§Ãµes HTTP (padrÃ£o: 30).
- `CDN_DOMAIN`: domÃ­nio da CDN usada nos vÃ­deos (ex.: `vz-xxxx.b-cdn.net`).
- `SESSION_DIR`: diretÃ³rio para salvar `.session.pkl`.

---

## ğŸªª CrÃ©ditos

- Script original: [@felipeadeildo](https://github.com/felipeadeildo)
- ManutenÃ§Ã£o/atualizaÃ§Ãµes e melhorias: [@Kazbonfim](https://github.com/Kazbonfim)

Obrigado por compartilhar conhecimento e facilitar a vida de quem estuda! ğŸ™Œ

---

## ğŸ§° Dicas e SoluÃ§Ã£o de Problemas

- "yt-dlp nÃ£o encontrado": verifique a instalaÃ§Ã£o e se o executÃ¡vel estÃ¡ no PATH.
- "ffmpeg nÃ£o encontrado": instale o FFmpeg e adicione a pasta `bin` ao PATH.
- Erros 401/403 ao baixar materiais: garanta que estÃ¡ logado (arquivo `.session.pkl` vÃ¡lido) e que possui acesso ao conteÃºdo.
- Se a Rocketseat alterar domÃ­nios de entrega dos vÃ­deos, ajuste `CDN_DOMAIN`.
- Para diagnÃ³sticos, confira `logs/{slug}_cluster_details.json` e os relatÃ³rios em `relatorios/`.
